<?xml version="1.0" ?>

<!--
This file is part of CPAchecker,
a tool for configurable software verification:
https://cpachecker.sosy-lab.org

SPDX-FileCopyrightText: 2022 Dirk Beyer <https://www.sosy-lab.org>

SPDX-License-Identifier: Apache-2.0
-->

<!--
CPAchecker timeouts on these input files.
Mutate CFA so analysis can find an error that is present in original program.
-->

<!DOCTYPE benchmark PUBLIC "+//IDN sosy-lab.org//DTD BenchExec benchmark 2.3//EN" "https://www.sosy-lab.org/benchexec/benchmark-2.3.dtd">
<benchmark tool="cpachecker" walltimelimit="211min">

  <option name="-setprop">limits.time.wall=209min</option>
  <option name="-setprop">limits.time.cpu=-1ns</option>
  <option name="-setprop">cfaMutation.dd.minProperty=VERDICT_UNKNOWN_BECAUSE_OF_TIMEOUT</option>
  <option name="-setprop">cfaMutation.timelimit.hardcap=150s</option>
  <option name="-setprop">cfaMutation.cex.timelimit=150s</option>

  <option name="-setprop">cpa.callstack.unsupportedFunctions=__VERIFIER_nonexisting_dummy_function</option>
  <option name="-setprop">cpa.predicate.allowedUnsupportedFunctions=memset,memcpy,__builtin_add_overflow,__builtin_mul_overflow,__builtin_va_arg</option>
  <option name="-setprop">counterexample.export.extendedWitnessFile=witness.%d.graphml</option>
  <option name="-setprop">counterexample.export.exportExtendedWitness=true</option>
  <option name="-setprop">counterexample.export.compressWitness=false</option>
  <option name="-setprop">cpa.arg.witness.removeInsufficientEdges=false</option>
  <!--  <option name="-heap">4000m</option>-->
  <option name="-64"/>
  <option name="-setprop">CompositeCPA.cpas=cpa.location.LocationCPA,cpa.callstack.CallstackCPA,cpa.smg.SMGCPA</option>
  <option name="-setprop">parser.readLineDirectives=false</option>
  <!-- were not set for 779 -->
  <option name="-setprop">cpa.smg.memcpyFunctions=__VERIFIER_memcpy</option>
  <option name="-setprop">cpa.smg.memsetFunctions=__VERIFIER_memset</option>

  <propertyfile>../../../programs/benchmarks/properties/valid-memsafety.prp</propertyfile>

  <rundefinition name="bare-analysis">
    <!-- all other options for bare analysis are above -->
    <option name="-smg-ldv"/>
  </rundefinition>

  <rundefinition name="DD+Min+">
    <option name="-cfaMutation-smg-ldv"/>
    <option name="-setprop">cfaMutation.dd=DDSEARCH</option>
    <option name="-setprop">cfaMutation.dd.direction=MINIMIZATION</option>
    <option name="-setprop">cfaMutation.dd.parts=DELTAS_AND_COMPLEMENTS</option>
  </rundefinition>

  <rundefinition name="DD+Max+">
    <option name="-cfaMutation-smg-ldv"/>
    <option name="-setprop">cfaMutation.dd=DDSEARCH</option>
    <option name="-setprop">cfaMutation.dd.direction=MAXIMIZATION</option>
    <option name="-setprop">cfaMutation.dd.parts=DELTAS_AND_COMPLEMENTS</option>
  </rundefinition>

  <!-- the second task needs ~10 min, other need more than several hours -->
  <tasks>
    <include>../../../programs/issues-for-mutation/issue-779.cil.i</include>
    <include>../../../programs/issues-for-mutation/drivers|video|fbdev|udlfb.ko.i</include>
    <include>../../../programs/issues-for-mutation/drivers|hid|hid-prodikeys.i</include>
    <include>../../../programs/issues-for-mutation/drivers|hwmon|abituguru3.i</include>
    <include>../../../programs/issues-for-mutation/drivers|hwmon|applesmc.i</include>
    <include>../../../programs/issues-for-mutation/drivers|media|i2c|saa7115.i</include>
    <include>../../../programs/issues-for-mutation/drivers|hwmon|adm1026.i</include>
  </tasks>

  <columns>
    <column title="total rounds">total count of mutation rounds</column>
    <column title="functions before">count of functions in function CFAs before mutations</column>
    <column title="functions after">count of functions in function CFAs after mutations</column>
    <column title="original time">time for original analysis run</column>
    <column title="time after mutations">time for analysis after mutations</column>
    <column title="time after rollbacks">time for analysis after rollback</column>
  </columns>
</benchmark>
