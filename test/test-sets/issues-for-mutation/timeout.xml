<?xml version="1.0" ?>

<!-- This file is part of CPAchecker, -->
<!-- a tool for configurable software verification: -->
<!-- https://cpachecker.sosy-lab.org -->
<!-- -->
<!-- SPDX-FileCopyrightText: 2022 Dirk Beyer <https://www.sosy-lab.org> -->
<!-- -->
<!-- SPDX-License-Identifier: Apache-2.0 -->

<!--
CPAchecker crashes on these input files (that means, these programs are failing tests).
These programs are used to test CFA mutator when it tries to make minimal failing test.
-->

<!DOCTYPE benchmark PUBLIC "+//IDN sosy-lab.org//DTD BenchExec benchmark 2.3//EN" "https://www.sosy-lab.org/benchexec/benchmark-2.3.dtd">
<benchmark tool="cpachecker" walltimelimit="15100s">

<!--   7500 7350 100 -->
    <option name="-setprop">limits.time.wall=14800s</option>
    <option name="-setprop">limits.time.cpu=-1ns</option>

	<option name="-setprop">output.disable=false</option>
    <option name="-setprop">cfa.export=true</option>
    <option name="-setprop">cfa.exportPerFunction=true</option>
    <option name="-setprop">cfa.exportToC=true</option>
    <option name="-setprop">cfa.serialize=true</option>

    <option name="-setprop">cfaMutation=true</option>
    <option name="-setprop">cfaMutation.walltimeLimit.original=200</option>
    <option name="-setprop">cfaMutation.walltimeLimit.factor=1.00</option>
    <option name="-setprop">cfaMutation.walltimeLimit.add=1</option>
    <option name="-setprop">cfaMutation.dd.minProperty=VERDICT_UNKNOWN_BECAUSE_OF_TIMEOUT</option>

	<columns>
		<column title="total rounds">total count of mutation rounds</column>
<!--		<column title="rounds with same error">successful mutations (sought-for error)</column>-->
<!--		<column title="rounds with no error">unsuccessfull mutations (no error)</column>-->
<!--		<column title="rounds with other problem">unsuccessfull mutations (other problems)</column>-->

		<column title="local nodes before">count of nodes in function CFAs before mutations</column>
		<column title="local nodes after">count of nodes in function CFAs after mutations</column>
<!--		<column title="local edges before">count of edges in function CFAs before mutations</column>-->
<!--		<column title="local edges after">count of edges in function CFAs after mutations</column>-->
<!--		<column title="global decls before">count of global declarations before mutations</column>-->
<!--		<column title="global decls after">count of global declarations after mutations</column>-->
<!--		<column title="functions before">count of functions in function CFAs before mutations</column>-->
<!--		<column title="functions after">count of functions in function CFAs after mutations</column>-->
		<column title="CFAs CC sum before">cyclomatic complexity of function CFAs before mutations</column>
		<column title="CFAs CC sum after">cyclomatic complexity of function CFAs after mutations</column>

<!--		<column title="full nodes before">count of nodes in full CFA before mutations</column>-->
<!--		<column title="full nodes after">count of nodes in full CFA after mutations</column>-->
<!--		<column title="full edges before">count of edges in full CFA before mutations</column>-->
<!--		<column title="full edges after">count of edges in full CFA after mutations</column>-->
<!--		<column title="full functions before">count of functions in full CFA before mutations</column>-->
<!--		<column title="full functions after">count of functions in full CFA after mutations</column>-->
<!--		<column title="CC of full CFA before">cyclomatic complexity of full CFA before mutations</column>-->
<!--		<column title="CC of full CFA after">cyclomatic complexity of full CFA after mutations</column>-->

		<column title="original time">time for original analysis run</column>
		<column title="time after mutations">time for analysis after mutations</column>
		<column title="time after rollbacks">time for analysis after rollback</column>
	</columns>

    <option name="-setprop">cfaMutation.manipulator=FunctionBodyManipulator</option>

<!--	<option name="-setprop">cfaMutation.manipulator=StructuredBlockManipulator</option>-->

<!-- DD MIN -->
	<rundefinition name="DD-Min-D">
		<option name="-setprop">cfaMutation.dd=DD</option>
		<option name="-setprop">cfaMutation.dd.direction=MINIMIZATION</option>
		<option name="-setprop">cfaMutation.dd.parts=ONLY_DELTAS</option>
	</rundefinition>

	<rundefinition name="DD-Min-C">
		<option name="-setprop">cfaMutation.dd=DD</option>
		<option name="-setprop">cfaMutation.dd.direction=MINIMIZATION</option>
		<option name="-setprop">cfaMutation.dd.parts=ONLY_COMPLEMENTS</option>
	</rundefinition>

	<rundefinition name="DD-Min-B">
		<option name="-setprop">cfaMutation.dd=DD</option>
		<option name="-setprop">cfaMutation.dd.direction=MINIMIZATION</option>
		<option name="-setprop">cfaMutation.dd.parts=DELTAS_AND_COMPLEMENTS</option>
	</rundefinition>

<!-- DD MAX -->
	<rundefinition name="DD-Max-D">
		<option name="-setprop">cfaMutation.dd=DD</option>
		<option name="-setprop">cfaMutation.dd.direction=MAXIMIZATION</option>
		<option name="-setprop">cfaMutation.dd.parts=ONLY_DELTAS</option>
	</rundefinition>

	<rundefinition name="DD-Max-C">
		<option name="-setprop">cfaMutation.dd=DD</option>
		<option name="-setprop">cfaMutation.dd.direction=MAXIMIZATION</option>
		<option name="-setprop">cfaMutation.dd.parts=ONLY_COMPLEMENTS</option>
	</rundefinition>

	<rundefinition name="DD-Max-B">
		<option name="-setprop">cfaMutation.dd=DD</option>
		<option name="-setprop">cfaMutation.dd.direction=MAXIMIZATION</option>
		<option name="-setprop">cfaMutation.dd.parts=DELTAS_AND_COMPLEMENTS</option>
	</rundefinition>

<!-- DD ISO -->
	<rundefinition name="DD-Iso-D">
		<option name="-setprop">cfaMutation.dd=DD</option>
		<option name="-setprop">cfaMutation.dd.direction=ISOLATION</option>
		<option name="-setprop">cfaMutation.dd.parts=ONLY_DELTAS</option>
	</rundefinition>

	<rundefinition name="DD-Iso-C">
		<option name="-setprop">cfaMutation.dd=DD</option>
		<option name="-setprop">cfaMutation.dd.direction=ISOLATION</option>
		<option name="-setprop">cfaMutation.dd.parts=ONLY_COMPLEMENTS</option>
	</rundefinition>

	<rundefinition name="DD-Iso-B">
		<option name="-setprop">cfaMutation.dd=DD</option>
		<option name="-setprop">cfaMutation.dd.direction=ISOLATION</option>
		<option name="-setprop">cfaMutation.dd.parts=DELTAS_AND_COMPLEMENTS</option>
	</rundefinition>


<!-- HDD MIN -->
	<rundefinition name="HDD-Min-D">
		<option name="-setprop">cfaMutation.dd=HDD</option>
		<option name="-setprop">cfaMutation.dd.direction=MINIMIZATION</option>
		<option name="-setprop">cfaMutation.dd.parts=ONLY_DELTAS</option>
	</rundefinition>

	<rundefinition name="HDD-Min-C">
		<option name="-setprop">cfaMutation.dd=HDD</option>
		<option name="-setprop">cfaMutation.dd.direction=MINIMIZATION</option>
		<option name="-setprop">cfaMutation.dd.parts=ONLY_COMPLEMENTS</option>
	</rundefinition>

	<rundefinition name="HDD-Min-B">
		<option name="-setprop">cfaMutation.dd=HDD</option>
		<option name="-setprop">cfaMutation.dd.direction=MINIMIZATION</option>
		<option name="-setprop">cfaMutation.dd.parts=DELTAS_AND_COMPLEMENTS</option>
	</rundefinition>

<!-- HDD MAX -->
	<rundefinition name="HDD-Max-D">
		<option name="-setprop">cfaMutation.dd=HDD</option>
		<option name="-setprop">cfaMutation.dd.direction=MAXIMIZATION</option>
		<option name="-setprop">cfaMutation.dd.parts=ONLY_DELTAS</option>
	</rundefinition>

	<rundefinition name="HDD-Max-C">
		<option name="-setprop">cfaMutation.dd=HDD</option>
		<option name="-setprop">cfaMutation.dd.direction=MAXIMIZATION</option>
		<option name="-setprop">cfaMutation.dd.parts=ONLY_COMPLEMENTS</option>
	</rundefinition>

	<rundefinition name="HDD-Max-B">
		<option name="-setprop">cfaMutation.dd=HDD</option>
		<option name="-setprop">cfaMutation.dd.direction=MAXIMIZATION</option>
		<option name="-setprop">cfaMutation.dd.parts=DELTAS_AND_COMPLEMENTS</option>
	</rundefinition>

<!-- HDD ISO -->
	<rundefinition name="HDD-Iso-D">
		<option name="-setprop">cfaMutation.dd=HDD</option>
		<option name="-setprop">cfaMutation.dd.direction=ISOLATION</option>
		<option name="-setprop">cfaMutation.dd.parts=ONLY_DELTAS</option>
	</rundefinition>

	<rundefinition name="HDD-Iso-C">
		<option name="-setprop">cfaMutation.dd=HDD</option>
		<option name="-setprop">cfaMutation.dd.direction=ISOLATION</option>
		<option name="-setprop">cfaMutation.dd.parts=ONLY_COMPLEMENTS</option>
	</rundefinition>

	<rundefinition name="HDD-Iso-B">
		<option name="-setprop">cfaMutation.dd=HDD</option>
		<option name="-setprop">cfaMutation.dd.direction=ISOLATION</option>
		<option name="-setprop">cfaMutation.dd.parts=DELTAS_AND_COMPLEMENTS</option>
	</rundefinition>


<!-- DD* -->
	<rundefinition name="DD+Min">
		<option name="-setprop">cfaMutation.dd=DDSTAR</option>
		<option name="-setprop">cfaMutation.dd.direction=MINIMIZATION</option>
		<option name="-setprop">cfaMutation.dd.parts=DELTAS_AND_COMPLEMENTS</option>
	</rundefinition>

	<rundefinition name="DD+Max">
		<option name="-setprop">cfaMutation.dd=DDSTAR</option>
		<option name="-setprop">cfaMutation.dd.direction=MAXIMIZATION</option>
		<option name="-setprop">cfaMutation.dd.parts=DELTAS_AND_COMPLEMENTS</option>
	</rundefinition>

<!-- DD** -->
	<rundefinition name="DD+Min+">
		<option name="-setprop">cfaMutation.dd=DDSEARCH</option>
		<option name="-setprop">cfaMutation.dd.direction=MINIMIZATION</option>
		<option name="-setprop">cfaMutation.dd.parts=DELTAS_AND_COMPLEMENTS</option>
	</rundefinition>

	<rundefinition name="DD+Max+">
		<option name="-setprop">cfaMutation.dd=DDSEARCH</option>
		<option name="-setprop">cfaMutation.dd.direction=MAXIMIZATION</option>
		<option name="-setprop">cfaMutation.dd.parts=DELTAS_AND_COMPLEMENTS</option>
	</rundefinition>

    <!-- actually needs 10 min -->
    <tasks>
        <option name="-setprop">cpa.callstack.unsupportedFunctions=__VERIFIER_nonexisting_dummy_function</option>
        <option name="-setprop">cpa.predicate.allowedUnsupportedFunctions=memset,memcpy,__builtin_add_overflow,__builtin_mul_overflow,__builtin_va_arg</option>
        <option name="-setprop">cpa.value.allowedUnsupportedFunctions=memset,memcpy,__builtin_add_overflow,__builtin_mul_overflow,__builtin_va_arg</option>
        <option name="-setprop">counterexample.export.extendedWitnessFile=witness.%d.graphml</option>
        <option name="-setprop">counterexample.export.exportExtendedWitness=true</option>
        <option name="-setprop">counterexample.export.compressWitness=false</option>
        <option name="-setprop">cpa.arg.witness.removeInsufficientEdges=false</option>
        <option name="-setprop">counterexample.export.exportCounterexampleCoverage=true</option>
        <option name="-setprop">counterexample.export.prefixAdditionalCoverageFile=Counterexample.%d.additionalCoverage.info</option>
        <option name="-setprop">additionalCoverage.file=additionalCoverage.info</option>
        <option name="-setprop">shutdown.timeout=100</option>
        <option name="-heap">4000m</option>
        <option name="-64"/>
        <option name="-smg-ldv"/>
        <option name="-setprop">CompositeCPA.cpas=cpa.location.LocationCPA,cpa.callstack.CallstackCPA,cpa.smg.SMGCPA</option>
        <option name="-setprop">parser.readLineDirectives=false</option>
        <option name="-setprop">cpa.smg.memcpyFunctions=__VERIFIER_memcpy</option>
        <option name="-setprop">cpa.smg.memsetFunctions=__VERIFIER_memset</option>

        <include>../../programs/issues-for-mutation/drivers|video|fbdev|udlfb.ko.i</include>

        <propertyfile>../../programs/benchmarks/properties/valid-memsafety.prp</propertyfile>
    </tasks>

    <!-- actually longer than several hours -->
    <tasks name="issue-779">
        <option name="-setprop">cpa.callstack.unsupportedFunctions=__VERIFIER_nonexisting_dummy_function</option>
        <option name="-setprop">cpa.predicate.allowedUnsupportedFunctions=memset,memcpy,__builtin_add_overflow,__builtin_mul_overflow,__builtin_va_arg</option>
        <option name="-setprop">counterexample.export.extendedWitnessFile=witness.%d.graphml</option>
        <option name="-setprop">counterexample.export.exportExtendedWitness=true</option>
        <option name="-setprop">counterexample.export.compressWitness=false</option>
        <option name="-setprop">cpa.arg.witness.removeInsufficientEdges=false</option>
        <option name="-heap">4000m</option>
        <option name="-64"/>
        <option name="-smg-ldv"/>
        <option name="-setprop">CompositeCPA.cpas=cpa.location.LocationCPA,cpa.callstack.CallstackCPA,cpa.smg.SMGCPA</option>
        <option name="-setprop">parser.readLineDirectives=false</option>

        <include>../../programs/issues-for-mutation/issue-779.cil.i</include>

        <propertyfile>../../programs/benchmarks/properties/valid-memsafety.prp</propertyfile>
    </tasks>

</benchmark>
